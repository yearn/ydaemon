# Strategies Package

## Overview

The `strategies` package provides API endpoints for retrieving strategic reports and related data for Yearn strategies deployed across multiple blockchain networks. These endpoints enable users to access historical performance, risk metrics, and operational data for Yearn's various investment strategies.

## API Endpoints

### Get Strategy Reports

```
GET /strategies/reports/:chainID/:address
```

Returns a chronological list of execution reports for a specific strategy on a specified blockchain.

#### Parameters

- `chainID`: The ID of the blockchain network (e.g., 1 for Ethereum Mainnet, 42161 for Arbitrum)
- `address`: The Ethereum address of the strategy contract (hexadecimal format)

#### Response Format

```json
[
	{
		"id": "0x1234...",
		"timestamp": 1678901234,
		"blockNumber": 16123456,
		"strategy": "0xabcd...",
		"results": {
			"totalDebt": "1000000000000000000000",
			"totalGain": "50000000000000000000",
			"totalLoss": "1000000000000000000",
			"debtAdded": "0",
			"debtRatio": "10000",
			"debtPaid": "0"
		},
		"transaction": {
			"hash": "0xefgh...",
			"from": "0x789..."
		}
	}
	// Additional reports...
]
```

#### Query Parameters

- `limit`: Maximum number of reports to return (default: 50)
- `offset`: Number of reports to skip (for pagination, default: 0)
- `from`: Unix timestamp to start from (default: 0)
- `to`: Unix timestamp to end at (default: current time)

## Response Structure

Each strategy report contains the following fields:

| Field             | Type   | Description                                    |
| ----------------- | ------ | ---------------------------------------------- |
| id                | string | Unique identifier for the report               |
| timestamp         | number | Unix timestamp when the report was generated   |
| blockNumber       | number | The block number when the report was generated |
| strategy          | string | The Ethereum address of the strategy           |
| results           | object | Performance metrics from the report            |
| results.totalDebt | string | Total debt allocated to the strategy (in wei)  |
| results.totalGain | string | Total gains generated by the strategy (in wei) |
| results.totalLoss | string | Total losses incurred by the strategy (in wei) |
| results.debtAdded | string | Additional debt allocated during this report   |
| results.debtRatio | string | Current debt ratio for the strategy            |
| results.debtPaid  | string | Debt paid back during this report              |
| transaction       | object | Transaction details for this report            |
| transaction.hash  | string | Transaction hash                               |
| transaction.from  | string | Address that initiated the transaction         |

## Integration with GraphQL

The strategies package uses GraphQL to fetch data from a blockchain indexer service. The GraphQL query fetches detailed report information and transforms it into a structured JSON response.

## Error Responses

| Status Code | Description                                            |
| ----------- | ------------------------------------------------------ |
| 400         | Bad Request - Invalid chainID or address format        |
| 404         | Not Found - No reports found for the strategy          |
| 500         | Internal Server Error - Failed to retrieve report data |

## Usage Examples

### Fetching reports for a strategy on Ethereum

```bash
curl -X GET "https://api.example.com/strategies/reports/1/0x12345678901234567890"
```

### Fetching reports with pagination and time filtering

```bash
curl -X GET "https://api.example.com/strategies/reports/1/0x12345678901234567890?limit=10&offset=20&from=1660000000&to=1670000000"
```

## Best Practices

1. **Use Pagination**: When working with strategies that have extensive history, use the limit and offset parameters
2. **Time Filtering**: Narrow down results with the from and to parameters for specific time ranges
3. **Cache Response Data**: Strategy reports are historical and don't change, so client-side caching is recommended
4. **Input Validation**: Always validate chain IDs and strategy addresses before making requests
